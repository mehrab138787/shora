{% extends "base.html" %}
{% block title %}Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª{% endblock %}

{% block content %}
<div class="card" style="padding:24px;">
    <!-- Ù‡Ø¯Ø± Ù¾Ù†Ù„ -->
    <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:16px;">
        <div>
            <div class="hero-title">ğŸ› ï¸ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</div>
            <div class="hero-subtitle" style="margin-top:6px;">Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ù†Ø¯ÛŒØ¯Ù‡Ø§ØŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù†ØªØ§ÛŒØ¬ Ùˆ Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</div>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <a class="btn btn-primary" href="{{ url_for('add_candidate') }}">â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ù†Ø¯ÛŒØ¯</a>
            <a class="btn btn-secondary" href="{{ url_for('print_results') }}" target="_blank">ğŸ–¨ï¸ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ùˆ Ù¾Ø±ÛŒÙ†Øª Ù†ØªØ§ÛŒØ¬</a>
            <form method="POST" action="{{ url_for('reset_votes') }}" style="display:inline;">
                <button class="btn btn-ghost" type="submit" onclick="return confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù‡Ù…Ù‡Ù” Ø¢Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ´Ø¯Ù‡ Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯ØŸ')">ğŸ”„ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¢Ø±Ø§</button>
            </form>
        </div>
    </div>

    <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø§ Ú¯Ø±ÛŒØ¯ -->
    <div style="margin-top:24px; display:grid; grid-template-columns: 1fr 320px; gap:24px;">
        <!-- Ú©Ø§Ù†Ø¯ÛŒØ¯Ù‡Ø§ -->
        <div>
            <div class="muted" style="margin-bottom:12px;">Ú©Ø§Ù†Ø¯ÛŒØ¯Ù‡Ø§</div>
            <div class="list">
                {% if candidates %}
                    {% for c in candidates %}
                        <div class="row">
                            <div>
                                <div class="name">{{ c[1] }}</div>
                                <div class="meta" style="margin-top:4px;">ID: {{ c[0] }}</div>
                            </div>
                            <div>
                                <form method="POST" action="{{ url_for('delete_candidate', candidate_id=c[0]) }}" style="display:inline;">
                                    <button class="btn btn-danger" type="submit" onclick="return confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ú©Ø§Ù†Ø¯ÛŒØ¯ Ùˆ Ø¢Ø±Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Ø¢Ù† Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ')">âŒ Ø­Ø°Ù</button>
                                </form>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="muted">Ù‡ÛŒÚ† Ú©Ø§Ù†Ø¯ÛŒØ¯ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</div>
                {% endif %}
            </div>
        </div>

        <!-- ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ Ùˆ Ù†ØªØ§ÛŒØ¬ -->
        <div style="display:flex; flex-direction:column; gap:16px;">
            <div class="card status-card">
                <div style="font-weight:800; font-size:22px; color:var(--accent); text-align:center;">{{ voted_students }}</div>
                <div class="muted" style="text-align:center;">Ø§Ø² {{ total_students }} Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø±Ø£ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒØ§Ù†Ø¯</div>
            </div>

            <div class="card results-card">
                <div class="muted" style="margin-bottom:6px;">Ù†ØªÛŒØ¬Ù‡Ù” ÙØ¹Ù„ÛŒ</div>
                <div class="list">
                    {% if results %}
                        {% for r in results %}
                            <div class="row">
                                <div>
                                    <div class="name">{{ r[1] }}</div>
                                    <div class="muted" style="margin-top:4px;">Ø¢Ø±Ø§: {{ r[2] }}</div>
                                </div>
                                <div class="meta">{% if loop.index==1 %}ğŸ¥‡{% elif loop.index==2 %}ğŸ¥ˆ{% elif loop.index==3 %}ğŸ¥‰{% else %}â€”{% endif %}</div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="muted">Ù‡Ù†ÙˆØ² Ø±Ø£ÛŒÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div style="margin-top:16px;">
        <div class="muted">Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ù‡ ÛŒÚ© Ú©Ù„Ø§Ø³ØŒ Ø§Ø¨ØªØ¯Ø§ Ø¨Ù‡ ØµÙØ­Ù‡Ù” Â«Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§Â» Ø¨Ø±ÙˆÛŒØ¯ Ùˆ Ø³Ù¾Ø³ Â«Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Â» Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯.</div>
    </div>
</div>

<style>
/* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
.card {
    border-radius: 20px;
    padding: 20px;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(20px);
    border:1px solid rgba(255,255,255,0.2);
    box-shadow: 0 10px 40px rgba(0,0,0,0.25);
    transition: all 0.3s ease;
}

/* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª Ùˆ Ù†ØªÛŒØ¬Ù‡ */
.status-card, .results-card {
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(15px);
}

/* Ø±Ø¯ÛŒÙâ€ŒÙ‡Ø§ */
.row {
    background: rgba(255,255,255,0.08);
    padding:10px 14px;
    border-radius:12px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.row:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 30px rgba(0,188,212,0.4);
}

/* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
.btn-primary { background: linear-gradient(90deg, var(--accent), #0091ea); color:white; }
.btn-primary:hover { background: linear-gradient(90deg, #26c6da, #00b0ff); transform:translateY(-3px); }
.btn-ghost { border:2px solid var(--accent); color: var(--accent); }
.btn-ghost:hover { background: var(--accent); color:white; transform:translateY(-3px); }
.btn-danger { background: linear-gradient(90deg,#f97373,#ef4444); color:white; }

/* ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§ */
@media(max-width:900px){
    div[style*="grid-template-columns: 1fr 320px"] { grid-template-columns: 1fr !important; }
}
</style>
{% endblock %}
