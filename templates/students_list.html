{% extends "base.html" %}
{% block title %}Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ú©Ù„Ø§Ø³ {{ class_name }}{% endblock %}

{% block content %}
<div class="card">

    <!-- ğŸ”¹ Ù‡Ø¯Ø± Ú©Ø§Ø±Øª -->
    <header class="card-header" style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:12px;">
        <div>
            <h2 class="h-main">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† â€” Ú©Ù„Ø§Ø³ {{ class_name }}</h2>
            <p class="muted">Ø±ÙˆÛŒ Ù†Ø§Ù… Ù‡Ø± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ØªØ§ Ø±Ø£ÛŒ Ø«Ø¨Øª Ø´ÙˆØ¯.</p>
        </div>
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
            <a href="{{ url_for('add_student', class_id=class_id) }}" class="btn">â• Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</a>
            <a href="{{ url_for('select_class') }}" class="btn" style="background:#09408f;">ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª</a>
        </div>
    </header>

    <!-- ğŸ”¹ ÙØ±Ù… Ø¬Ø³ØªØ¬Ùˆ -->
    <form method="get" action="" style="margin-top:16px; display:flex; gap:8px; flex-wrap:wrap;">
        <input
            type="text"
            name="search"
            value="{{ search }}"
            placeholder="ğŸ” Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²..."
            style="
                flex:1;
                padding:10px 12px;
                border:none;
                border-radius:8px;
                font-size:14px;
                outline:none;
                background:#0b3a82;
                color:white;
            "
        >
        <button type="submit" class="btn">Ø¬Ø³ØªØ¬Ùˆ</button>
    </form>

    <!-- ğŸ”¹ Ù„ÛŒØ³Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† -->
    <div style="margin-top:20px;">
        {% if students %}
            {% for s in students %}
                <div
                    class="student-row"
                    style="
                        display:flex;
                        justify-content:space-between;
                        align-items:center;
                        padding:12px 8px;
                        border-bottom:1px solid rgba(255,255,255,0.1);
                        transition:background 0.2s;
                    "
                    onmouseover="this.style.background='rgba(255,255,255,0.05)'"
                    onmouseout="this.style.background='transparent'"
                >
                    <div>
                        <div style="font-weight:600; font-size:15px;">{{ s[1] }}</div>
                        <div class="muted" style="margin-top:4px; font-size:13px;">
                            {% if s[2] == 1 %}
                                âœ… ÙˆØ¶Ø¹ÛŒØª: Ø±Ø£ÛŒ Ø¯Ø§Ø¯Ù‡
                            {% else %}
                                â³ ÙˆØ¶Ø¹ÛŒØª: Ø±Ø£ÛŒ Ù†Ø¯Ø§Ø¯Ù‡
                            {% endif %}
                        </div>
                    </div>

                    <div>
                        {% if s[2] == 1 %}
                            <span style="color:var(--muted); font-weight:700;">âœ” Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡</span>
                        {% else %}
                            <a
                                href="{{ url_for('vote', class_id=class_id, student_id=s[0]) }}"
                                class="btn"
                                style="background:var(--accent);"
                            >ğŸ—³ï¸ Ø±Ø£ÛŒ Ø¯Ø§Ø¯Ù†</a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="muted" style="text-align:center; padding:16px;">Ù‡ÛŒÚ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.</p>
        {% endif %}
    </div>

</div>
{% endblock %}
